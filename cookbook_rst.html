<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Command-line reference" href="cli.html" /><link rel="prev" title="pyziggy" href="index.html" />

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.07.19 -->
        <title>Cookbook - pyziggy 0.9.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=25af2a20" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">pyziggy 0.9.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <span class="sidebar-brand-text">pyziggy 0.9.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">The basics</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command-line reference</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="api.html">API reference</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of API reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.broadcasters.html">pyziggy.broadcasters</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.devices_client.html">pyziggy.devices_client</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.device_bases.html">pyziggy.device_bases</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.message_loop.html">pyziggy.message_loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.parameters.html">pyziggy.parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.util.html">pyziggy.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.workarounds.html">pyziggy.workarounds</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.cli.html">pyziggy.cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/pyziggy.run.html">pyziggy.run</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/cookbook_rst.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="cookbook">
<h1>Cookbook<a class="headerlink" href="#cookbook" title="Link to this heading">¶</a></h1>
<section id="recipes-for-building-automations">
<h2>Recipes for building automations<a class="headerlink" href="#recipes-for-building-automations" title="Link to this heading">¶</a></h2>
<p>The following are simple examples for typical use-cases. They assume an automation project set up in the way laid out in the <a href="index.html#a-minimal-automation-project">minimal automation project</a> section.</p>
<section id="debugging-your-automation">
<h3>Debugging your automation<a class="headerlink" href="#debugging-your-automation" title="Link to this heading">¶</a></h3>
<p>This recipe also assumes, that pyziggy has been installed in the virtual environment under <code class="docutils literal notranslate"><span class="pre">my_automation/.venv</span></code>.</p>
<p>Open <code class="docutils literal notranslate"><span class="pre">my_automation</span></code> in PyCharm. It should detect the <code class="docutils literal notranslate"><span class="pre">.venv</span></code> subdirectory and automatically configure your environment.</p>
<p>Open the <code class="docutils literal notranslate"><span class="pre">my_automation.py</span></code> file from the project pane, right click in its editor window, and select <em>“Modify Run Configuration…”</em>. Provide the following details</p>
<p><img alt="Run configuration for automation.py" src="_images/debug_configuration.png" /></p>
<p>Now you can press the debug button in PyCharm, and it should stop at breakpoints.</p>
</section>
<section id="bind-a-light-to-a-switch-and-run-indefinitely">
<h3>Bind a light to a switch and run indefinitely<a class="headerlink" href="#bind-a-light-to-a-switch-and-run-indefinitely" title="Link to this heading">¶</a></h3>
<p>The full contents of <code class="docutils literal notranslate"><span class="pre">automation.py</span></code> for such a task would be as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy_autogenerate.available_devices</span><span class="w"> </span><span class="kn">import</span> <span class="n">AvailableDevices</span>

<span class="n">devices</span> <span class="o">=</span> <span class="n">AvailableDevices</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">switch_handler</span><span class="p">():</span>
    <span class="n">action_type</span> <span class="o">=</span> <span class="n">devices</span><span class="o">.</span><span class="n">ikea_remote</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">enum_type</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">devices</span><span class="o">.</span><span class="n">ikea_remote</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">get_enum_value</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="n">action_type</span><span class="o">.</span><span class="n">on</span><span class="p">:</span>
        <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">action</span> <span class="o">==</span> <span class="n">action_type</span><span class="o">.</span><span class="n">off</span><span class="p">:</span>
        <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">devices</span><span class="o">.</span><span class="n">ikea_remote</span><span class="o">.</span><span class="n">action</span><span class="o">.</span><span class="n">add_listener</span><span class="p">(</span><span class="n">switch_handler</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pyziggy</span> <span class="pre">run</span> <span class="pre">automation.py</span></code> command runs indefinitely by default. You can terminate it with the SIGINT signal, i.e. by pressing CTLR+C when running in a terminal.</p>
<p><em><strong>Side note:</strong></em> This example demonstrates how to use an enum parameter in a type safe way. For more on this, see</p>
<ul class="simple">
<li><p><a class="reference internal" href="generated/pyziggy.parameters.html#pyziggy.parameters.EnumParameter" title="pyziggy.parameters.EnumParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyziggy.parameters.EnumParameter</span></code></a>.</p></li>
</ul>
<p><em><strong>Side note:</strong></em> pyziggy treats enum parameters with the name <em>action</em> a little differently, but you don’t have to do anything about this. For more on this topic, see</p>
<ul class="simple">
<li><p><a class="reference internal" href="generated/pyziggy.parameters.html#pyziggy.parameters.NumericParameter.set_always_call_listeners_on_report" title="pyziggy.parameters.NumericParameter.set_always_call_listeners_on_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyziggy.parameters.NumericParameter.set_always_call_listeners_on_report()</span></code></a></p></li>
<li><p><a class="reference internal" href="generated/pyziggy.workarounds.html#pyziggy.workarounds.Workarounds.make_action_enum_parameters_always_call_listeners" title="pyziggy.workarounds.Workarounds.make_action_enum_parameters_always_call_listeners"><code class="xref py py-data docutils literal notranslate"><span class="pre">pyziggy.workarounds.Workarounds.make_action_enum_parameters_always_call_listeners</span></code></a>.</p></li>
</ul>
</section>
<section id="turn-on-a-light-and-exit-immediately">
<h3>Turn on a light and exit immediately<a class="headerlink" href="#turn-on-a-light-and-exit-immediately" title="Link to this heading">¶</a></h3>
<p>The full contents of <code class="docutils literal notranslate"><span class="pre">automation.py</span></code> for such a task would be as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy.message_loop</span><span class="w"> </span><span class="kn">import</span> <span class="n">message_loop</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy_autogenerate.available_devices</span><span class="w"> </span><span class="kn">import</span> <span class="n">AvailableDevices</span>

<span class="n">devices</span> <span class="o">=</span> <span class="n">AvailableDevices</span><span class="p">()</span>


<span class="k">def</span><span class="w"> </span><span class="nf">turn_on_and_exit</span><span class="p">():</span>
    <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">message_loop</span><span class="o">.</span><span class="n">stop_after_a_second</span><span class="p">()</span>


<span class="n">devices</span><span class="o">.</span><span class="n">on_connect</span><span class="o">.</span><span class="n">add_listener</span><span class="p">(</span><span class="n">turn_on_and_exit</span><span class="p">)</span>
</pre></div>
</div>
<p>Since this script unconditionally changes parameters, and doesn’t care about any state in the system, it is a perfect candidate for using the <code class="docutils literal notranslate"><span class="pre">--no_startup_query</span></code> argument. For more about this, see the <a href="cli.html#named-arguments">Command-line-reference</a>.</p>
<p>Note the call to <a class="reference internal" href="generated/pyziggy.message_loop.html#pyziggy.message_loop.MessageLoop.stop_after_a_second" title="pyziggy.message_loop.MessageLoop.stop_after_a_second"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyziggy.message_loop.MessageLoop.stop_after_a_second()</span></code></a> as opposed to calling <a class="reference internal" href="generated/pyziggy.message_loop.html#pyziggy.message_loop.MessageLoop.stop" title="pyziggy.message_loop.MessageLoop.stop"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyziggy.message_loop.MessageLoop.stop()</span></code></a>. This is necessary, because <code class="docutils literal notranslate"><span class="pre">stop()</span></code> would immediately exit the message loop, and the pyziggy wouldn’t have a chance to send the MQTT messages for the light.</p>
<p><em><strong>Side note:</strong></em> For more on this behaviour, see</p>
<ul class="simple">
<li><p><a class="reference internal" href="generated/pyziggy.parameters.html#pyziggy.parameters.SettableNumericParameter.set" title="pyziggy.parameters.SettableNumericParameter.set"><code class="xref py py-func docutils literal notranslate"><span class="pre">pyziggy.parameters.SettableNumericParameter.set()</span></code></a>.</p></li>
</ul>
</section>
<section id="execute-a-series-of-operations-at-timed-intervals-then-exit">
<h3>Execute a series of operations at timed intervals, then exit<a class="headerlink" href="#execute-a-series-of-operations-at-timed-intervals-then-exit" title="Link to this heading">¶</a></h3>
<p>The full contents of <code class="docutils literal notranslate"><span class="pre">automation.py</span></code> for such a task would be as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">override</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy.message_loop</span><span class="w"> </span><span class="kn">import</span> <span class="n">message_loop</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy.util</span><span class="w"> </span><span class="kn">import</span> <span class="n">TimedRunner</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy_autogenerate.available_devices</span><span class="w"> </span><span class="kn">import</span> <span class="n">AvailableDevices</span>

<span class="n">devices</span> <span class="o">=</span> <span class="n">AvailableDevices</span><span class="p">()</span>


<span class="k">class</span><span class="w"> </span><span class="nc">MyTasks</span><span class="p">(</span><span class="n">TimedRunner</span><span class="p">):</span>
    <span class="nd">@override</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">brightness</span><span class="o">.</span><span class="n">set_normalized</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">color_temp</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">454</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">color_temp</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">179</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">devices</span><span class="o">.</span><span class="n">kitchen_light</span><span class="o">.</span><span class="n">color_temp</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>
            <span class="n">message_loop</span><span class="o">.</span><span class="n">stop_after_a_second</span><span class="p">()</span>


<span class="n">_</span> <span class="o">=</span> <span class="n">MyTasks</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span>
</pre></div>
</div>
<p>Since this script unconditionally changes parameters, and doesn’t care about any state in the system, it is a perfect candidate for using the <code class="docutils literal notranslate"><span class="pre">--no_startup_query</span></code> argument. For more about this, see the <a href="cli.html#named-arguments">Command-line-reference</a>.</p>
<p>For more on the utility class, see</p>
<ul class="simple">
<li><p><a class="reference internal" href="generated/pyziggy.util.html#pyziggy.util.TimedRunner" title="pyziggy.util.TimedRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyziggy.util.TimedRunner</span></code></a></p></li>
</ul>
</section>
<section id="launch-a-webserver-that-exposes-automation-functions">
<h3>Launch a webserver that exposes automation functions<a class="headerlink" href="#launch-a-webserver-that-exposes-automation-functions" title="Link to this heading">¶</a></h3>
<p>Pyziggy has a Flask integration and the <code class="docutils literal notranslate"><span class="pre">pyziggy</span> <span class="pre">run</span> <span class="pre">automation.py</span></code> command will automatically pick up a Flask object, and start listening on the port defined in <code class="docutils literal notranslate"><span class="pre">config.toml</span></code>.</p>
<p>It’s all straightforward by-the-book Flask, you only need to take care of the synchronization with the <code class="xref py py-mod docutils literal notranslate"><span class="pre">message_loop</span></code>. This is demonstrated in the recipe below.</p>
<p>The full contents of <code class="docutils literal notranslate"><span class="pre">automation.py</span></code> for such a task would be as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">flask</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">request</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy_autogenerate.available_devices</span><span class="w"> </span><span class="kn">import</span> <span class="n">AvailableDevices</span>

<span class="n">devices</span> <span class="o">=</span> <span class="n">AvailableDevices</span><span class="p">()</span>


<span class="k">def</span><span class="w"> </span><span class="nf">turn_off_all_lights</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">devices</span><span class="o">.</span><span class="n">get_devices</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">LightWithDimming</span><span class="p">):</span>
            <span class="n">device</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">http_message_handler</span><span class="p">(</span><span class="n">payload</span><span class="p">):</span>
    <span class="k">if</span> <span class="s2">&quot;action&quot;</span> <span class="ow">in</span> <span class="n">payload</span><span class="p">:</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;action&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;turn_off_all_lights&quot;</span><span class="p">:</span>
            <span class="n">turn_off_all_lights</span><span class="p">()</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/pyziggy&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">http_pyziggy_help</span><span class="p">():</span>
    <span class="n">commands</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;turn_off_all_lights&quot;</span><span class="p">},</span>
    <span class="p">]</span>

    <span class="n">html</span> <span class="o">=</span> <span class="n">make_html</span><span class="p">(</span><span class="s2">&quot;Send commands to &lt;code&gt;/pyziggy/post&lt;/code&gt;.&quot;</span><span class="p">,</span> <span class="n">commands</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">html</span><span class="p">,</span> <span class="mi">200</span>


<span class="nd">@app</span><span class="o">.</span><span class="n">route</span><span class="p">(</span><span class="s2">&quot;/pyziggy/post&quot;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;POST&quot;</span><span class="p">])</span>
<span class="k">def</span><span class="w"> </span><span class="nf">http_pyziggy_post</span><span class="p">():</span>
    <span class="n">payload</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">message_callback</span><span class="p">():</span>
        <span class="n">http_message_handler</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>

    <span class="n">message_loop</span><span class="o">.</span><span class="n">post_message</span><span class="p">(</span><span class="n">message_callback</span><span class="p">)</span>

    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="mi">200</span>
</pre></div>
</div>
<p>I omitted the <code class="docutils literal notranslate"><span class="pre">make_html</span></code> function, but you can see it in the complete automation project example at <a class="reference external" href="https://github.com/bebump/pyziggy-example">https://github.com/bebump/pyziggy-example</a>.</p>
<p>With a POST endpoint exposed, like above, it’s very easy to trigger pyziggy automation functions with tools such as iOS Shortcuts, which also makes them easy to trigger using Siri voice commands.</p>
</section>
<section id="create-a-self-contained-executable-script">
<h3>Create a self-contained, executable script<a class="headerlink" href="#create-a-self-contained-executable-script" title="Link to this heading">¶</a></h3>
<p>Until now, all examples used the <code class="docutils literal notranslate"><span class="pre">pyziggy</span> <span class="pre">run</span> <span class="pre">automation.py</span></code> command. This recipe shows how to create a single <code class="docutils literal notranslate"><span class="pre">.py</span></code> script that you can execute directly.</p>
<p>The downside of this approach is, that it doesn’t connect to MQTT prior to launching your automation and doesn’t regenerate the <code class="docutils literal notranslate"><span class="pre">AvailableDevices</span></code> type, so it can contain out-of-date information. Because of this, I don’t recommend this, but it can be done.</p>
<p>The full contents of <code class="docutils literal notranslate"><span class="pre">automation.py</span></code> for such a task would be as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy</span><span class="w"> </span><span class="kn">import</span> <span class="n">PyziggyConfig</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy.run</span><span class="w"> </span><span class="kn">import</span> <span class="n">run_command</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">pyziggy_autogenerate.available_devices</span><span class="w"> </span><span class="kn">import</span> <span class="n">AvailableDevices</span>

<span class="n">devices</span> <span class="o">=</span> <span class="n">AvailableDevices</span><span class="p">()</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">PyziggyConfig</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;config.toml&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">config</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

<span class="n">run_command</span><span class="p">(</span><span class="n">devices</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>You can now execute this script directly with <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">automation.py</span></code>.</p>
</section>
</section>
<section id="working-with-the-pyziggy-setup-script">
<h2>Working with the <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> script<a class="headerlink" href="#working-with-the-pyziggy-setup-script" title="Link to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>The script makes changes to the directory it’s in. Not the current working directory.</strong> And I might change this behavior in future versions, so use this script at your own peril.</p>
</div>
<section id="set-up-a-project-directory-with-a-venv-directory-and-pyziggy-installed">
<h3>Set up a project directory with a <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory and pyziggy installed<a class="headerlink" href="#set-up-a-project-directory-with-a-venv-directory-and-pyziggy-installed" title="Link to this heading">¶</a></h3>
<p>We’ll create a new project in the <code class="docutils literal notranslate"><span class="pre">my_automation</span></code> directory. This requires that <code class="docutils literal notranslate"><span class="pre">pyenv</span></code> is installed on your system.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">my_automation</span>
<span class="n">cd</span> <span class="n">my_automation</span>
</pre></div>
</div>
<p>The next block downloads the <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> script into <code class="docutils literal notranslate"><span class="pre">my_automation</span></code>, downloads an appropriate version using <code class="docutils literal notranslate"><span class="pre">pyenv</span></code>, creates a <code class="docutils literal notranslate"><span class="pre">.venv</span></code> subdirectory, and installs <code class="docutils literal notranslate"><span class="pre">pyziggy</span></code> in it.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">fsSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bebump</span><span class="o">/</span><span class="n">pyziggy</span><span class="o">/</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">util</span><span class="o">/</span><span class="n">pyziggy</span><span class="o">-</span><span class="n">setup</span> <span class="o">-</span><span class="n">o</span> <span class="n">pyziggy</span><span class="o">-</span><span class="n">setup</span>
<span class="n">chmod</span> <span class="n">u</span><span class="o">+</span><span class="n">x</span> <span class="n">pyziggy</span><span class="o">-</span><span class="n">setup</span>
<span class="o">./</span><span class="n">pyziggy</span><span class="o">-</span><span class="n">setup</span> <span class="n">setup</span>
</pre></div>
</div>
<p>You can now activate the virtual environment, and create your pyziggy project</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">.</span><span class="n">venv</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">pyziggy</span> <span class="n">run</span> <span class="n">automation</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</section>
<section id="automatically-deploy-a-project-to-a-remote-machine-and-run-it-as-a-service">
<h3>Automatically deploy a project to a remote machine and run it as a service<a class="headerlink" href="#automatically-deploy-a-project-to-a-remote-machine-and-run-it-as-a-service" title="Link to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is currently supported on MacOS only.</p>
</div>
<p>This recipe assumes</p>
<ul class="simple">
<li><p>the <a href="index.html#a-minimal-automation-project">minimal automation project</a>,</p></li>
<li><p>with the addition, that the <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> script has also been placed in the project directory,</p></li>
<li><p>and the <code class="docutils literal notranslate"><span class="pre">remote.json</span></code> file also added to the project directory (see below),</p></li>
<li><p>and a <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> also added to your project directory, containing all required dependencies, including <code class="docutils literal notranslate"><span class="pre">pyziggy</span></code>,</p></li>
<li><p>a remote machine with the project machine’s SSH key added to its <code class="docutils literal notranslate"><span class="pre">authorized_keys</span></code>,</p></li>
<li><p>rsync 3.2.0 or greater installed on the project machine, and</p></li>
<li><p>pyenv installed on the remote machine.</p></li>
</ul>
<p>To download the default <code class="docutils literal notranslate"><span class="pre">remote.json</span></code>, issue</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">fsSL</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">bebump</span><span class="o">/</span><span class="n">pyziggy</span><span class="o">/</span><span class="n">refs</span><span class="o">/</span><span class="n">heads</span><span class="o">/</span><span class="n">main</span><span class="o">/</span><span class="n">util</span><span class="o">/</span><span class="n">remote</span><span class="o">.</span><span class="n">json</span> <span class="o">-</span><span class="n">o</span> <span class="n">remote</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>and then edit it, so that it points to your remote machine. Alternatively, here’s the full contents of the default <code class="docutils literal notranslate"><span class="pre">remote.json</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;ssh_host&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.1.56&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ssh_user&quot;</span><span class="p">:</span> <span class="s2">&quot;home_automation&quot;</span><span class="p">,</span>
    <span class="s2">&quot;ssh_remote_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;~/pyziggy_automation&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ssh_remote_dir</span></code> is the directory where the project will be uploaded. The <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> script will automatically create this directory if it doesn’t exist.</p>
<p>At this point this is what your project directory should look like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>my_automation/
├─ pyziggy_autogenerate/
│  └─ available_devices.py
├─ automation.py
├─ config.toml
├─ pyziggy-setup
├─ remote.json
└─ requirements.txt

</pre></div>
</div>
<p>You can now issue</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">pyziggy</span><span class="o">-</span><span class="n">setup</span> <span class="n">sync</span><span class="o">-</span><span class="n">remote</span> <span class="n">start</span> <span class="n">automation</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This command will</p>
<ol class="arabic simple">
<li><p>Create the <code class="docutils literal notranslate"><span class="pre">pyziggy_automation</span></code> directory under the <code class="docutils literal notranslate"><span class="pre">home_automation</span></code> user, if it doesn’t exist.</p></li>
<li><p>Use rsync to upload the contents of your project directory to <code class="docutils literal notranslate"><span class="pre">pyziggy_automation</span></code>.</p></li>
<li><p>Create a virtual environment under <code class="docutils literal notranslate"><span class="pre">~/pyziggy_automation/.venv</span></code> and install <code class="docutils literal notranslate"><span class="pre">~/pyziggy_automation/requirements.txt</span></code> into it.</p></li>
<li><p>Stops and uninstalls any currently running <code class="docutils literal notranslate"><span class="pre">net.bebump.pyziggy</span></code> services.</p></li>
<li><p>Verifies that your new project installation can be launched.</p></li>
<li><p>Installs a new <code class="docutils literal notranslate"><span class="pre">net.bebump.pyziggy</span></code> service, and launches it.</p></li>
</ol>
<p>If at any point the script encounters an error condition, it exits with 1. The logs written by the service are redirected to <code class="docutils literal notranslate"><span class="pre">/tmp/net.bebump.pyziggy/stdout.log</span></code> and <code class="docutils literal notranslate"><span class="pre">/tmp/net.bebump.pyziggy/stderr.log</span></code>.</p>
</section>
<section id="stop-the-service-running-on-the-remote">
<h3>Stop the service running on the remote<a class="headerlink" href="#stop-the-service-running-on-the-remote" title="Link to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This command will overwrite the contents in your local project directory, with contents in the remote service directory. If you don’t trust the state of the remote service directory, use something like <code class="docutils literal notranslate"><span class="pre">git</span></code> to avoid data loss. <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> files are respected and contents of the <code class="docutils literal notranslate"><span class="pre">.git</span></code> directory aren’t overwritten.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This feature is currently supported on MacOS only.</p>
</div>
<p>See the previous section. Assuming a <code class="docutils literal notranslate"><span class="pre">remote.json</span></code> file with the correct values, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">pyziggy</span><span class="o">-</span><span class="n">setup</span> <span class="n">sync</span><span class="o">-</span><span class="n">remote</span> <span class="n">stop</span>
</pre></div>
</div>
<p>This command will</p>
<ol class="arabic simple">
<li><p>Use rsync to download the contents from the remote directory into your local your project directory, overwriting anything.</p></li>
<li><p>Stops and uninstalls any currently running <code class="docutils literal notranslate"><span class="pre">net.bebump.pyziggy</span></code> services on the remote.</p></li>
</ol>
</section>
<section id="running-pyziggy-setup-from-pycharm">
<h3>Running <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> from PyCharm<a class="headerlink" href="#running-pyziggy-setup-from-pycharm" title="Link to this heading">¶</a></h3>
<p>Pretty obvious, but all of these commands can be added as run configrations to PyCharm.</p>
<p>This is what my PyCharm project configuration looks like. I’m only showing the <code class="docutils literal notranslate"><span class="pre">sync-remote</span> <span class="pre">start</span></code> pane, the rest should be obvious based on the earlier sections.</p>
<p><img alt="Run configuration for automation.py" src="_images/pyziggy-setup_configuration.png" /></p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="cli.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Command-line reference</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, Attila Szarvas
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Cookbook</a><ul>
<li><a class="reference internal" href="#recipes-for-building-automations">Recipes for building automations</a><ul>
<li><a class="reference internal" href="#debugging-your-automation">Debugging your automation</a></li>
<li><a class="reference internal" href="#bind-a-light-to-a-switch-and-run-indefinitely">Bind a light to a switch and run indefinitely</a></li>
<li><a class="reference internal" href="#turn-on-a-light-and-exit-immediately">Turn on a light and exit immediately</a></li>
<li><a class="reference internal" href="#execute-a-series-of-operations-at-timed-intervals-then-exit">Execute a series of operations at timed intervals, then exit</a></li>
<li><a class="reference internal" href="#launch-a-webserver-that-exposes-automation-functions">Launch a webserver that exposes automation functions</a></li>
<li><a class="reference internal" href="#create-a-self-contained-executable-script">Create a self-contained, executable script</a></li>
</ul>
</li>
<li><a class="reference internal" href="#working-with-the-pyziggy-setup-script">Working with the <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> script</a><ul>
<li><a class="reference internal" href="#set-up-a-project-directory-with-a-venv-directory-and-pyziggy-installed">Set up a project directory with a <code class="docutils literal notranslate"><span class="pre">.venv</span></code> directory and pyziggy installed</a></li>
<li><a class="reference internal" href="#automatically-deploy-a-project-to-a-remote-machine-and-run-it-as-a-service">Automatically deploy a project to a remote machine and run it as a service</a></li>
<li><a class="reference internal" href="#stop-the-service-running-on-the-remote">Stop the service running on the remote</a></li>
<li><a class="reference internal" href="#running-pyziggy-setup-from-pycharm">Running <code class="docutils literal notranslate"><span class="pre">pyziggy-setup</span></code> from PyCharm</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=9dc39874"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    </body>
</html>